apiversion: multimodal_sd_modelslim_v1
metadata:
  config_id: flux1_w8a8c8_mxfp8
  score: 0.95
  verified_model_types:
    - FLUX.1-dev
  label:
    w_bit: 8
    a_bit: 8
    is_sparse: False
    kv_cache: True

default_w8a8_dynamic: &default_w8a8_dynamic
  act:
    scope: "per_block"
    dtype: "mxfp8"
    symmetric: True
    method: "minmax"
  weight:
    scope: "per_block"
    dtype: "mxfp8"
    symmetric: True
    method: "minmax"

spec:
  process:
    - type: "online_quarot"
      include: ["*"]
    - type: "fa3_quant"
      qconfig:
        dtype: "fp8_e4m3"
        scope: "per_token"
        symmetric: True
        method: "minmax"
      include:
        - "*"
    - type: "linear_quant"
      qconfig: *default_w8a8_dynamic

  save:
    - type: "mindie_format_saver"
      part_file_size: 0

# 基础配置
  multimodal_sd_config:
    dump_config:
      capture_mode: "args"
      dump_data_dir: ""  # default is save_path 
    model_config:
      prompt: "Beautiful illustration of The ocean. in a serene landscape, magic realism, narrative realism, beautiful matte painting, heavenly lighting, retrowave, 4 k hd wallpaper"
      height: 1024
      width: 1024
      save_path_suffix: "test"
      save_path: "./results"
      num_inference_steps: 50